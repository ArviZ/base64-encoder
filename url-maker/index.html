<html>
  <head>
    <title>URL Website Maker</title>
    <!--
      Click the button over there ==>
      to open a new tab with the
      code currently in this editor
    -->
  </head>
  <body style="font-family: Courier;">

    <a id="ln" target="_blank" style="background: whitesmoke; position: absolute;
      top: 0; right: 0; z-index: 2; padding: 10px; margin: 10px; border-radius: 5px;
      color: black; text-decoration: none;">Open this page</a>

    <div id="ta" style=" font-size: 16px; position: absolute; top: 0; left: 0;
      width: 100%; height: 100%; z-index: 1;"></div>

    <script src="http://cdnjs.cloudflare.com/ajax/libs/ace/1.1.01/ace.js"
            type="text/javascript" charset="utf-8"></script>

    <script>
      var ln = document.getElementById('ln');
      var update = function() {
        ln.href = 'data:text/html;base64,' + btoa(editor.session.getValue());
      }
      var editor = ace.edit("ta");
      editor.setTheme("ace/theme/monokai");
      editor.getSession().setMode("ace/mode/html");
      editor.session.setTabSize(2);
      editor.session.setUseSoftTabs(true);
      editor.setShowPrintMargin(false);
      editor.on('change',update);
      editor.session.setValue(
        atob(/base64,(.*)$/.test(location.href) ? RegExp.$1 : '')
      );
      update();
    </script>
  </body>
</html>
